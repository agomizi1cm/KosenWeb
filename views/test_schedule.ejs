<!DOCTYPE html>
<html>
    <head>
        <title><%= title %></title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            /* 埋め込みPDFが画面いっぱいに表示されるようにスタイル */
            .pdf-container {
                width: 100%; 
                /* 画面の高さの80%を指定 */
                height: 80vh; 
                border: 1px solid #ccc;
                margin-top: 20px;
            }
            /* エラーメッセージ用のスタイル */
            .error-message {
                color: white;
                background-color: #d9534f; /* 赤色 */
                padding: 20px;
                border-radius: 8px;
                margin-bottom: 30px;
                font-size: 1.1em;
                line-height: 1.5;
            }
            .error-message a {
                color: #ffc107; /* リンクの色を黄色にして視認性を上げる */
                font-weight: bold;
            }
        </style>
    </head>
 <body>
        <h1><%= title %></h1>
        <% 
        // 成功: pdfUrl があり、かつ error がない場合
        if (pdfUrl && !error) { 
        %>
            <div style="margin-bottom: 20px;">
                <h2>最新のPDF日程表が見つかりました</h2>
                <p>
                    <a href="<%= pdfUrl %>" target="_blank" style="font-size: 1.2em; color: #007bff; text-decoration: none;">
                        ⬇️ **クリックしてPDFファイルを表示・ダウンロード**
                    </a>
                </p>
            </div>
            
            <hr>

            <h3>PDFの埋め込み表示</h3>
            <div class="pdf-container">
                <iframe src="<%= pdfUrl %>" style="width: 100%; height: 100%; border: none;" title="最新のテスト日程表PDF"></iframe>
            </div>
            
        <% 
        // 失敗: error にメッセージがある、または pdfUrl が見つからない場合
        } else { 
        %>
            <div class="error-message">
                <h3>テスト日程表の取得に失敗しました</h3>
                <p>
                    <% if (error) { %>
                        **エラー詳細**: <%= error %>
                    <% } else { %>
                        現在、最新のPDFリンクを特定できませんでした。
                    <% } %>
                </p>
                <p>
                    **お手数ですが、以下の公式サイトをご確認ください。**
                    <br>
                    <a href="<%= targetUrl %>" target="_blank">
                        群馬工業高等専門学校 行事・授業・試験ページ
                    </a>
                </p>
            </div>
        <% } %>

        <p style="margin-top: 30px;"><a href="../">戻る</a></p>
    </body>
</html>
